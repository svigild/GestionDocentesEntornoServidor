<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/main :: layout(~{::section})}">
<head></head>
<body>
<section>

  <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-3">
    <div>
      <h4 class="fw-bold m-0 text-dark">Claustro de Profesores</h4>
      <p class="text-muted small m-0">Listado completo del personal docente del centro.</p>
    </div>
    <div class="d-flex gap-2">
      <button class="btn btn-white border shadow-sm text-muted bg-white fw-medium">
        <i class="bi bi-download me-2"></i>Exportar CSV
      </button>
      <a th:href="@{/web/docentes/crear}" class="btn btn-primary shadow-sm fw-medium">
        <i class="bi bi-person-plus-fill me-2"></i>Nuevo Docente
      </a>
    </div>
  </div>

  <div class="card border-0 shadow-sm mb-4">
    <div class="card-body p-2">
      <form th:action="@{/web/docentes}" method="get" class="row g-2 align-items-center">

        <div class="col-auto ps-3 text-muted">
          <i class="bi bi-search"></i>
        </div>

        <div class="col">
          <input type="text" class="form-control border-0 shadow-none" placeholder="Buscar docente...">
        </div>

        <div class="col-auto">
          <div class="vr h-100 mx-2 text-muted opacity-25"></div>
        </div>

        <div class="col-auto pe-3">
          <select name="departamento" class="form-select border-0 shadow-none bg-light text-muted fw-medium"
                  style="width: 200px; font-size: 0.9rem;"
                  onchange="this.form.submit()">

            <option value="Todos">Todos los Dept.</option>
            <option th:each="dept : ${departamentos}"
                    th:value="${dept.nombre}"
                    th:text="${dept.nombre}"
                    th:selected="${dept.nombre == deptSeleccionado}">
              Informática
            </option>

          </select>
        </div>

      </form>
    </div>
  </div>

  <div class="card border-0 shadow-sm overflow-hidden">
    <div class="table-responsive">
      <table class="table align-middle table-hover mb-0">
        <thead class="bg-light border-bottom">
        <tr>
          <th class="ps-4 py-3 text-uppercase text-muted small fw-bold" style="letter-spacing: 0.5px;">Docente</th>
          <th class="py-3 text-uppercase text-muted small fw-bold" style="letter-spacing: 0.5px;">Departamento</th>
          <th class="py-3 text-uppercase text-muted small fw-bold" style="letter-spacing: 0.5px;">Siglas</th>
          <th class="py-3 text-uppercase text-muted small fw-bold" style="letter-spacing: 0.5px;">Rol</th>
          <th class="pe-4 py-3 text-end text-uppercase text-muted small fw-bold" style="letter-spacing: 0.5px;">Acciones</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="docente : ${listaDocentes}">
          <td class="ps-4 py-3">
            <div class="d-flex align-items-center">
              <div class="rounded-circle text-white d-flex align-items-center justify-content-center fw-bold me-3 shadow-sm"
                   style="width: 40px; height: 40px; font-size: 0.85rem; background: linear-gradient(135deg, #4f46e5, #818cf8);"
                   th:text="${#strings.substring(docente.nombre,0,1) + #strings.substring(docente.apellidos,0,1)}">
                JD
              </div>
              <div class="d-flex flex-column">
                <span class="fw-bold text-dark" th:text="${docente.apellidos} + ', ' + ${docente.nombre}">Apellido, Nombre</span>
                <span class="small text-muted" th:text="${docente.email}">correo@educastur.org</span>
              </div>
            </div>
          </td>

          <td>
            <div th:if="${docente.departamento != null}" class="d-flex align-items-center gap-2">
                                <span class="badge bg-light text-secondary border fw-normal px-2 py-1"
                                      th:text="${docente.departamento.codigo}">COD</span>
              <span class="small text-muted" th:text="${docente.departamento.nombre}">Nombre Dept</span>
            </div>
            <span class="text-muted small fst-italic" th:unless="${docente.departamento != null}">Sin asignar</span>
          </td>

          <td>
                            <span class="font-monospace small bg-light px-2 py-1 rounded border text-muted fw-bold"
                                  th:text="${docente.siglas}">ABCD</span>
          </td>

          <td>
                            <span th:if="${docente.rol != null}"
                                  class="badge bg-primary-subtle text-primary border border-primary-subtle rounded-pill px-3 fw-normal"
                                  th:text="${docente.rol.nombre}">Profesor</span>
            <span th:unless="${docente.rol != null}" class="text-muted small">-</span>
          </td>

          <td class="pe-4 text-end">
            <div class="dropdown">
              <button class="btn btn-light btn-sm rounded-circle shadow-sm" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-three-dots-vertical text-muted"></i>
              </button>
              <ul class="dropdown-menu dropdown-menu-end border-0 shadow">
                <li><a class="dropdown-item small py-2" href="#"><i class="bi bi-eye me-2 text-primary"></i> Ver Perfil</a></li>
                <li><a class="dropdown-item small py-2" href="#"><i class="bi bi-pencil me-2 text-warning"></i> Editar</a></li>
                <li><a class="dropdown-item small py-2" href="#"><i class="bi bi-envelope me-2 text-secondary"></i> Enviar Email</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item small py-2 text-danger" href="#"><i class="bi bi-trash me-2"></i> Eliminar</a></li>
              </ul>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <div th:if="${#lists.isEmpty(listaDocentes)}" class="text-center py-5">
      <div class="mb-3 text-muted opacity-25">
        <i class="bi bi-people fs-1"></i>
      </div>
      <h6 class="fw-bold text-muted">No hay docentes registrados</h6>
      <p class="small text-muted">Utiliza el botón superior para añadir nuevos profesores.</p>
    </div>

    <div class="card-footer bg-white border-0 py-3 d-flex justify-content-between align-items-center" th:unless="${#lists.isEmpty(listaDocentes)}">
      <small class="text-muted">Mostrando <span class="fw-bold text-dark" th:text="${#lists.size(listaDocentes)}">0</span> docentes</small>
      <nav>
        <ul class="pagination pagination-sm mb-0 gap-1">
          <li class="page-item disabled"><a class="page-link border-0 rounded-circle" href="#"><i class="bi bi-chevron-left"></i></a></li>
          <li class="page-item active"><a class="page-link border-0 rounded-circle bg-primary text-white" href="#">1</a></li>
          <li class="page-item"><a class="page-link border-0 rounded-circle text-muted" href="#">2</a></li>
          <li class="page-item"><a class="page-link border-0 rounded-circle text-muted" href="#">3</a></li>
          <li class="page-item"><a class="page-link border-0 rounded-circle text-muted" href="#"><i class="bi bi-chevron-right"></i></a></li>
        </ul>
      </nav>
    </div>
  </div>

</section>
</body>
</html>