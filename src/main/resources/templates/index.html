<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/main :: layout(~{::section})}">
<head></head>
<body>
<section>

    <div class="row g-4 mb-4">

        <div class="col-md-4">
            <div class="card p-3 h-100">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <p class="text-muted small mb-1 fw-bold text-uppercase">Total Claustro</p>
                        <h2 class="fw-bold mb-0 text-dark" th:text="${totalDocentes} ?: '0'">0</h2>
                    </div>
                    <div class="p-3 rounded bg-primary bg-opacity-10 text-primary">
                        <i class="bi bi-people-fill fs-3"></i>
                    </div>
                </div>
                <div class="mt-3">
                    <span class="badge bg-success bg-opacity-10 text-success">+ Activos</span>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card p-3 h-100">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <p class="text-muted small mb-1 fw-bold text-uppercase">Solicitudes Pendientes</p>
                        <h2 class="fw-bold mb-0 text-dark" th:text="${solicitudesPendientes} ?: '0'">0</h2>
                    </div>
                    <div class="p-3 rounded bg-warning bg-opacity-10 text-warning">
                        <i class="bi bi-clock-history fs-3"></i>
                    </div>
                </div>
                <div class="mt-3">
                    <span class="text-muted small">Requieren validaci칩n</span>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card p-3 h-100 bg-primary text-white" style="background: linear-gradient(135deg, #4f46e5 0%, #3730a3 100%);">
                <div class="card-body d-flex flex-column justify-content-center text-center">
                    <h5 class="fw-bold"><i class="bi bi-lightning-charge-fill"></i> Acciones R치pidas</h5>
                    <p class="small opacity-75">Gestiona tus permisos o consulta el horario.</p>
                    <div class="d-flex gap-2 justify-content-center mt-2">
                        <a href="/web/solicitud/nueva" class="btn btn-light btn-sm fw-bold text-primary">Solicitar D칤a</a>
                        <a href="/web/docentes" class="btn btn-outline-light btn-sm">Ver Listado</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row g-4">
        <div class="col-lg-8">
            <div class="card h-100 shadow-sm border-0">
                <div class="card-header bg-white border-0 py-3 d-flex justify-content-between align-items-center">
                    <h6 class="fw-bold m-0 text-primary">游늶 칔ltimas Solicitudes Registradas</h6>
                    <small class="text-muted">Tiempo real</small>
                </div>
                <div class="table-responsive">
                    <table class="table align-middle mb-0 table-hover">
                        <thead class="bg-light text-muted small text-uppercase">
                        <tr>
                            <th class="ps-4">Docente</th>
                            <th>Fecha Solicitada</th>
                            <th>Estado</th>
                            <th>Gesti칩n</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="act : ${actividadReciente}">
                            <td class="ps-4">
                                <div class="d-flex align-items-center">
                                    <div class="avatar me-3 bg-primary text-white d-flex align-items-center justify-content-center fw-bold rounded-circle"
                                         style="width:30px; height:30px; font-size: 0.7rem;"
                                         th:text="${#strings.substring(act.docente.nombre,0,1) + #strings.substring(act.docente.apellidos,0,1)}">
                                        JD
                                    </div>
                                    <div>
                                        <div class="fw-bold text-dark" style="font-size: 0.9rem;"
                                             th:text="${act.docente.nombre} + ' ' + ${act.docente.apellidos}">Nombre</div>
                                        <div class="small text-muted" style="font-size: 0.75rem;"
                                             th:text="${act.docente.departamento.codigo}">DEPT</div>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <span class="fw-medium text-dark" th:text="${act.diaSolicitado}">Fecha</span>
                            </td>
                            <td>
                                <span th:if="${act.aprobado == null}" class="badge bg-warning-subtle text-warning border border-warning-subtle">Pendiente</span>
                                <span th:if="${act.aprobado == true}" class="badge bg-success-subtle text-success border border-success-subtle">Aprobada</span>
                                <span th:if="${act.aprobado == false}" class="badge bg-danger-subtle text-danger border border-danger-subtle">Denegada</span>
                            </td>
                            <td>
                                <a href="/web/admin/validar" class="btn btn-sm btn-light border shadow-sm text-muted">
                                    <i class="bi bi-arrow-right-short"></i>
                                </a>
                            </td>
                        </tr>

                        <tr th:if="${#lists.isEmpty(actividadReciente)}">
                            <td colspan="4" class="text-center py-4 text-muted small">
                                <i class="bi bi-inbox fs-4 d-block mb-2 opacity-50"></i>
                                No hay actividad reciente en el sistema.
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card mb-4">
                <div class="card-body">
                    <h6 class="fw-bold mb-3">游닉 Avisos Importantes</h6>
                    <div class="alert alert-info border-0 d-flex gap-3 align-items-center mb-2">
                        <i class="bi bi-info-circle-fill fs-4"></i>
                        <div class="small line-height-sm">Recuerda firmar las actas antes del viernes 15.</div>
                    </div>
                    <div class="alert alert-warning border-0 d-flex gap-3 align-items-center">
                        <i class="bi bi-exclamation-triangle-fill fs-4"></i>
                        <div class="small line-height-sm">Mantenimiento programado del servidor a las 14:00.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</section>
</body>
</html>